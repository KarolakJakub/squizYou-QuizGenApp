{"ast":null,"code":"import _objectSpread from \"/home/j/Projects/squizuForked/squizYou-QuizGenApp/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport firebase from 'firebase';\nexport const fetchQuiz = callback => {\n  const quizRef = firebase.database().ref(\"quizes\");\n  quizRef.on(\"value\", snapshot => {\n    const value = snapshot.val();\n    const entries = Object.values(value);\n    callback(entries);\n    return quizRef.off('value');\n  });\n  return quizRef;\n};\nexport const addNewQuiz = quizId => {\n  const newQuestionCard = {\n    \"id\": \"\".concat(quizId),\n    \"title\": \"Nowy Quiz\",\n    \"uniqueId\": '',\n    \"questions\": [{\n      \"id\": \"1\",\n      \"question\": \"Pytanie\",\n      \"answers\": [{\n        \"id\": \"1\",\n        \"answer\": \"\",\n        \"correct\": true\n      }, {\n        \"id\": \"2\",\n        \"answer\": \"\",\n        \"correct\": false\n      }, {\n        \"id\": \"3\",\n        \"answer\": \"\",\n        \"correct\": false\n      }, {\n        \"id\": \"4\",\n        \"answer\": \"\",\n        \"correct\": false\n      }],\n      \"correctAnswers\": [1]\n    }]\n  };\n  const uniqueIdRef = firebase.database().ref('quizes').push(newQuestionCard);\n  const postId = uniqueIdRef.key;\n  firebase.database().ref(\"quizes/\".concat(postId)).update({\n    'uniqueId': \"\".concat(postId)\n  });\n  return postId;\n};\nexport const saveQuiz = quiz => {\n  const newQuestions = quiz.questions.map(question => {\n    question.correctAnswers = [];\n    question.answers.forEach(answer => {\n      if (answer.correct === true) {\n        question.correctAnswers.push(answer.id);\n      }\n    });\n    return question;\n  });\n\n  const newQuiz = _objectSpread({}, quiz, {\n    questions: newQuestions\n  });\n\n  firebase.database().ref(\"quizes/\".concat(quiz.uniqueId)).set(newQuiz);\n};\nexport const deleteQuiz = uniqueQuizId => {\n  firebase.database().ref(\"quizes/\".concat(uniqueQuizId)).remove();\n};","map":{"version":3,"sources":["/home/j/Projects/squizuForked/squizYou-QuizGenApp/src/services/QuizService.js"],"names":["firebase","fetchQuiz","callback","quizRef","database","ref","on","snapshot","value","val","entries","Object","values","off","addNewQuiz","quizId","newQuestionCard","uniqueIdRef","push","postId","key","update","saveQuiz","quiz","newQuestions","questions","map","question","correctAnswers","answers","forEach","answer","correct","id","newQuiz","uniqueId","set","deleteQuiz","uniqueQuizId","remove"],"mappings":";AAAA,OAAOA,QAAP,MAAqB,UAArB;AAEA,OAAO,MAAMC,SAAS,GAAIC,QAAD,IAAc;AAEnC,QAAMC,OAAO,GAAGH,QAAQ,CAACI,QAAT,GAAoBC,GAApB,CAAwB,QAAxB,CAAhB;AAEAF,EAAAA,OAAO,CAACG,EAAR,CAAW,OAAX,EAAoBC,QAAQ,IAAI;AAC5B,UAAMC,KAAK,GAAGD,QAAQ,CAACE,GAAT,EAAd;AAEA,UAAMC,OAAO,GAAGC,MAAM,CAACC,MAAP,CAAcJ,KAAd,CAAhB;AAEAN,IAAAA,QAAQ,CAACQ,OAAD,CAAR;AACA,WAAOP,OAAO,CAACU,GAAR,CAAY,OAAZ,CAAP;AACH,GAPD;AAQA,SAAOV,OAAP;AACH,CAbM;AAeP,OAAO,MAAMW,UAAU,GAAIC,MAAD,IAAY;AAElC,QAAMC,eAAe,GACrB;AACI,oBAASD,MAAT,CADJ;AAEI,aAAS,WAFb;AAGI,gBAAY,EAHhB;AAII,iBAAa,CACT;AACI,YAAM,GADV;AAEI,kBAAY,SAFhB;AAGI,iBAAW,CACP;AACI,cAAM,GADV;AAEI,kBAAU,EAFd;AAGI,mBAAW;AAHf,OADO,EAMP;AACI,cAAM,GADV;AAEI,kBAAU,EAFd;AAGI,mBAAW;AAHf,OANO,EAWP;AACI,cAAM,GADV;AAEI,kBAAU,EAFd;AAGI,mBAAW;AAHf,OAXO,EAgBP;AACI,cAAM,GADV;AAEI,kBAAU,EAFd;AAGI,mBAAW;AAHf,OAhBO,CAHf;AAyBI,wBAAkB,CAAC,CAAD;AAzBtB,KADS;AAJjB,GADA;AAoCA,QAAME,WAAW,GAAGjB,QAAQ,CAACI,QAAT,GAAoBC,GAApB,CAAwB,QAAxB,EAAkCa,IAAlC,CAAuCF,eAAvC,CAApB;AAEA,QAAMG,MAAM,GAAGF,WAAW,CAACG,GAA3B;AAEApB,EAAAA,QAAQ,CAACI,QAAT,GAAoBC,GAApB,kBAAkCc,MAAlC,GAA4CE,MAA5C,CAAmD;AAAE,0BAAeF,MAAf;AAAF,GAAnD;AAEA,SAAOA,MAAP;AACH,CA7CM;AA+CP,OAAO,MAAMG,QAAQ,GAAIC,IAAD,IAAU;AAE9B,QAAMC,YAAY,GAAGD,IAAI,CAACE,SAAL,CAAeC,GAAf,CAAmBC,QAAQ,IAAI;AAEhDA,IAAAA,QAAQ,CAACC,cAAT,GAA0B,EAA1B;AAEAD,IAAAA,QAAQ,CAACE,OAAT,CAAiBC,OAAjB,CAAyBC,MAAM,IAAI;AAC/B,UAAIA,MAAM,CAACC,OAAP,KAAmB,IAAvB,EAA6B;AACzBL,QAAAA,QAAQ,CAACC,cAAT,CAAwBV,IAAxB,CAA6Ba,MAAM,CAACE,EAApC;AACH;AACJ,KAJD;AAKA,WAAON,QAAP;AAEH,GAXoB,CAArB;;AAaA,QAAMO,OAAO,qBAAQX,IAAR;AAAcE,IAAAA,SAAS,EAAED;AAAzB,IAAb;;AAEAxB,EAAAA,QAAQ,CAACI,QAAT,GAAoBC,GAApB,kBAAkCkB,IAAI,CAACY,QAAvC,GAAmDC,GAAnD,CAAuDF,OAAvD;AAEH,CAnBM;AAqBP,OAAO,MAAMG,UAAU,GAAIC,YAAD,IAAkB;AACxCtC,EAAAA,QAAQ,CAACI,QAAT,GAAoBC,GAApB,kBAAkCiC,YAAlC,GAAkDC,MAAlD;AACH,CAFM","sourcesContent":["import firebase from 'firebase'\n\nexport const fetchQuiz = (callback) => {\n\n    const quizRef = firebase.database().ref(\"quizes\")\n\n    quizRef.on(\"value\", snapshot => {\n        const value = snapshot.val()\n\n        const entries = Object.values(value);\n\n        callback(entries)\n        return quizRef.off('value')\n    })\n    return quizRef\n}\n\nexport const addNewQuiz = (quizId) => {\n\n    const newQuestionCard =\n    {\n        \"id\": `${quizId}`,\n        \"title\": \"Nowy Quiz\",\n        \"uniqueId\": '',\n        \"questions\": [\n            {\n                \"id\": \"1\",\n                \"question\": \"Pytanie\",\n                \"answers\": [\n                    {\n                        \"id\": \"1\",\n                        \"answer\": \"\",\n                        \"correct\": true\n                    },\n                    {\n                        \"id\": \"2\",\n                        \"answer\": \"\",\n                        \"correct\": false\n                    },\n                    {\n                        \"id\": \"3\",\n                        \"answer\": \"\",\n                        \"correct\": false\n                    },\n                    {\n                        \"id\": \"4\",\n                        \"answer\": \"\",\n                        \"correct\": false\n                    }\n                ],\n                \"correctAnswers\": [1]\n\n            }]\n    }\n\n    const uniqueIdRef = firebase.database().ref('quizes').push(newQuestionCard)\n\n    const postId = uniqueIdRef.key\n\n    firebase.database().ref(`quizes/${postId}`).update({ 'uniqueId': `${postId}` })\n\n    return postId\n}\n\nexport const saveQuiz = (quiz) => {\n\n    const newQuestions = quiz.questions.map(question => {\n\n        question.correctAnswers = []\n\n        question.answers.forEach(answer => {\n            if (answer.correct === true) {\n                question.correctAnswers.push(answer.id)\n            }\n        })\n        return question\n\n    })\n\n    const newQuiz = { ...quiz, questions: newQuestions }\n\n    firebase.database().ref(`quizes/${quiz.uniqueId}`).set(newQuiz)\n\n}\n\nexport const deleteQuiz = (uniqueQuizId) => {\n    firebase.database().ref(`quizes/${uniqueQuizId}`).remove()\n}\n\n\n\n"]},"metadata":{},"sourceType":"module"}